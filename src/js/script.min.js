window.addEventListener("DOMContentLoaded",()=>{function e(e){const t=document.querySelector(".goods__wrapper");e.forEach(function(e){let n=document.createElement("div");n.classList.add("goods__item"),n.innerHTML=`\n        <img class="goods__img" src="${e.url}" alt="phone">\n        <div class="goods__colors">Доступно цветов: 4</div>\n        <div class="goods__title">${e.title}</div>\n        <div class="goods__price">\n            <span>${e.price}</span> грн/шт\n        </div>\n        <button class="goods__btn">Добавить в корзину</button>\n      `,t.appendChild(n)})}const t=async(t,n)=>{await fetch(t).then(e=>e.json()).then(t=>e(t.goods)),n()};t("js/db.json",()=>{function e(){d.style.display="block",document.body.style.overflow="hidden",l()}function t(){d.style.display="none",document.body.style.overflow=""}function n(){y.forEach(function(e){if(!(e.textContent.length<=49)){const t=`${e.textContent.slice(0,49)}...`;e.textContent=t}})}function o(e){f.style.display="block";let t=performance.now();requestAnimationFrame(function n(o){let c=(o-t)/e.duration;c>1&&(c=1);let r=e.timing(c);e.draw(r),c<1&&requestAnimationFrame(n)})}function c(){let e=s.querySelectorAll(".goods__item");if(m.textContent=e.length,0==e.length){let e=document.createElement("div");e.classList.add("empty"),e.innerHTML="Ваша корзина опять пуста",s.appendChild(e)}}function r(){const e=document.querySelectorAll(".cart__wrapper > .goods__item > .goods__price > span");let t=0;e.forEach(function(e){t+=+e.textContent}),i.textContent=t}function l(){const e=s.querySelectorAll(".goods__item-remove");e.forEach(function(e){e.addEventListener("click",()=>{e.parentElement.remove(),c(),r()})})}const d=document.querySelector(".cart"),i=document.querySelector(".cart__total > span"),s=document.querySelector(".cart__wrapper"),a=document.querySelector(".cart__close"),u=document.querySelector("#cart"),m=document.querySelector(".nav__badge"),_=document.querySelectorAll(".goods__item"),y=document.querySelectorAll(".goods__title"),p=document.querySelectorAll(".goods__btn"),f=document.querySelector(".confirm");u.addEventListener("click",e),a.addEventListener("click",t),p.forEach(function(e,t){e.addEventListener("click",()=>{let e=_[t].cloneNode(!0),n=e.querySelector("button"),l=document.createElement("div"),d=s.querySelector(".empty");n.remove(),o({duration:1e3,timing:function(e){return e},draw:function(e){e>=0&&(f.style.opacity=`${-1*e+1}`,f.style.transform=`translateY(${150*e}px)`)}}),l.classList.add("goods__item-remove"),e.appendChild(l),l.innerHTML="&times;",s.appendChild(e),d&&d.remove(),c(),r()})}),n()})});